!function s(o,u,a){function l(i,t){if(!u[i]){if(!o[i]){var e="function"==typeof require&&require;if(!t&&e)return e(i,!0);if(h)return h(i,!0);var n=new Error("Cannot find module '"+i+"'");throw n.code="MODULE_NOT_FOUND",n}var r=u[i]={exports:{}};o[i][0].call(r.exports,function(t){var e=o[i][1][t];return l(e||t)},r,r.exports,s,o,u,a)}return u[i].exports}for(var h="function"==typeof require&&require,t=0;t<a.length;t++)l(a[t]);return l}({1:[function(e,o,t){(function(){var k,n,l,r,t,b=function(t,e){return function(){return t.apply(e,arguments)}},c=[].slice,s={}.hasOwnProperty,i=function(t,e){for(var i in e)s.call(e,i)&&(t[i]=e[i]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},p=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1};k={options:["prefix","templateDelimiters","rootInterface","preloadData","handler","executeFunctions"],extensions:["binders","formatters","components","adapters"],public:{binders:{},components:{},formatters:{},adapters:{},prefix:"rv",templateDelimiters:["{","}"],rootInterface:".",preloadData:!0,executeFunctions:!1,iterationAlias:function(t){return"%"+t+"%"},handler:function(t,e,i){return this.call(t,e,i.view.models)},configure:function(t){var e,i,n,r;for(n in null==t&&(t={}),t)if(r=t[n],"binders"===n||"components"===n||"formatters"===n||"adapters"===n)for(i in r)e=r[i],k[n][i]=e;else k.public[n]=r},bind:function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),(n=new k.View(t,e,i)).bind(),n},init:function(t,e,i){var n,r,s;if(null==i&&(i={}),null==e&&(e=document.createElement("div")),(r=(t=k.public.components[t]).template.call(this,e))instanceof HTMLElement){for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(r)}else e.innerHTML=r;return n=t.initialize.call(this,e,i),(s=new k.View(e,n)).bind(),s}}},window.jQuery||window.$?(t="on"in(l=window.jQuery||window.$).prototype?["on","off"]:["bind","unbind"],n=t[0],r=t[1],k.Util={bindEvent:function(t,e,i){return l(t)[n](e,i)},unbindEvent:function(t,e,i){return l(t)[r](e,i)},getInputValue:function(t){var e;return"checkbox"===(e=l(t)).attr("type")?e.is(":checked"):e.val()}}):k.Util={bindEvent:"addEventListener"in window?function(t,e,i){return t.addEventListener(e,i,!1)}:function(t,e,i){return t.attachEvent("on"+e,i)},unbindEvent:"removeEventListener"in window?function(t,e,i){return t.removeEventListener(e,i,!1)}:function(t,e,i){return t.detachEvent("on"+e,i)},getInputValue:function(t){var e,i,n,r;if("checkbox"===t.type)return t.checked;if("select-multiple"===t.type){for(r=[],i=0,n=t.length;i<n;i++)(e=t[i]).selected&&r.push(e.value);return r}return t.value}},k.TypeParser=function(){function t(){}return t.types={primitive:0,keypath:1},t.parse=function(t){return/^'.*'$|^".*"$/.test(t)?{type:this.types.primitive,value:t.slice(1,-1)}:"true"===t?{type:this.types.primitive,value:!0}:"false"===t?{type:this.types.primitive,value:!1}:"null"===t?{type:this.types.primitive,value:null}:"undefined"===t?{type:this.types.primitive,value:void 0}:""===t?{type:this.types.primitive,value:void 0}:!1===isNaN(Number(t))?{type:this.types.primitive,value:Number(t)}:{type:this.types.keypath,value:t}},t}(),k.TextTemplateParser=function(){function t(){}return t.types={text:0,binding:1},t.parse=function(t,e){var i,n,r,s,o,u,a;for(u=[],s=t.length,n=i=0;n<s;){if((i=t.indexOf(e[0],n))<0){u.push({type:this.types.text,value:t.slice(n)});break}if(0<i&&n<i&&u.push({type:this.types.text,value:t.slice(n,i)}),n=i+e[0].length,(i=t.indexOf(e[1],n))<0){o=t.slice(n-e[1].length),(null!=(r=u[u.length-1])?r.type:void 0)===this.types.text?r.value+=o:u.push({type:this.types.text,value:o});break}a=t.slice(n,i).trim(),u.push({type:this.types.binding,value:a}),n=i+e[1].length}return u},t}(),k.View=function(){function t(t,e,i){var n,r,s,o,u,a,l,h,p,c,d,f,v;for(this.els=t,this.models=e,null==i&&(i={}),this.update=b(this.update,this),this.publish=b(this.publish,this),this.sync=b(this.sync,this),this.unbind=b(this.unbind,this),this.bind=b(this.bind,this),this.select=b(this.select,this),this.traverse=b(this.traverse,this),this.build=b(this.build,this),this.buildBinding=b(this.buildBinding,this),this.bindingRegExp=b(this.bindingRegExp,this),this.options=b(this.options,this),this.els.jquery||this.els instanceof Array||(this.els=[this.els]),u=0,l=(p=k.extensions).length;u<l;u++){if(this[r=p[u]]={},i[r])for(n in c=i[r])s=c[n],this[r][n]=s;for(n in d=k.public[r])s=d[n],null==(o=this[r])[n]&&(o[n]=s)}for(a=0,h=(f=k.options).length;a<h;a++)this[r=f[a]]=null!=(v=i[r])?v:k.public[r];this.build()}return t.prototype.options=function(){var t,e,i,n,r;for(e={},i=0,n=(r=k.extensions.concat(k.options)).length;i<n;i++)e[t=r[i]]=this[t];return e},t.prototype.bindingRegExp=function(){return new RegExp("^"+this.prefix+"-")},t.prototype.buildBinding=function(t,e,i,r){var n,s,o,u,a,l,h;return a={},h=function(){var t,e,i,n;for(n=[],t=0,e=(i=r.match(/((?:'[^']*')*(?:(?:[^\|']*(?:'[^']*')+[^\|']*)+|[^\|]+))|^$/g)).length;t<e;t++)l=i[t],n.push(l.trim());return n}(),u=(n=function(){var t,e,i,n;for(n=[],t=0,e=(i=h.shift().split("<")).length;t<e;t++)s=i[t],n.push(s.trim());return n}()).shift(),a.formatters=h,(o=n.shift())&&(a.dependencies=o.split(/\s+/)),this.bindings.push(new k[t](this,e,i,u,a))},t.prototype.build=function(){var t,f,e,i,n,v;for(this.bindings=[],f=function(r){var t,e,i,s,n,o,u,a,l,h,p,c,d;if(3===r.nodeType){if(n=k.TextTemplateParser,(i=v.templateDelimiters)&&(a=n.parse(r.data,i)).length&&(1!==a.length||a[0].type!==n.types.text)){for(l=0,p=a.length;l<p;l++)u=a[l],o=document.createTextNode(u.value),r.parentNode.insertBefore(o,r),1===u.type&&v.buildBinding("TextBinding",o,null,u.value);r.parentNode.removeChild(r)}}else 1===r.nodeType&&(t=v.traverse(r));if(!t)for(h=0,c=(d=function(){var t,e,i,n;for(n=[],t=0,e=(i=r.childNodes).length;t<e;t++)s=i[t],n.push(s);return n}()).length;h<c;h++)e=d[h],f(e)},e=0,i=(n=(v=this).els).length;e<i;e++)t=n[e],f(t);this.bindings.sort(function(t,e){var i,n;return((null!=(i=e.binder)?i.priority:void 0)||0)-((null!=(n=t.binder)?n.priority:void 0)||0)})},t.prototype.traverse=function(t){var e,i,n,r,s,o,u,a,l,h,p,c,d,f,v;for(r=this.bindingRegExp(),s="SCRIPT"===t.nodeName||"STYLE"===t.nodeName,l=0,p=(d=t.attributes).length;l<p;l++)if(e=d[l],r.test(e.name)){if(u=e.name.replace(r,""),!(n=this.binders[u]))for(o in f=this.binders)a=f[o],"*"!==o&&-1!==o.indexOf("*")&&new RegExp("^"+o.replace(/\*/g,".+")+"$").test(u)&&(n=a);n||(n=this.binders["*"]),n.block&&(s=!0,i=[e])}for(h=0,c=(v=i||t.attributes).length;h<c;h++)e=v[h],r.test(e.name)&&(u=e.name.replace(r,""),this.buildBinding("Binding",t,u,e.value));return s||(u=t.nodeName.toLowerCase(),this.components[u]&&!t._bound&&(this.bindings.push(new k.ComponentBinding(this,t,u)),s=!0)),s},t.prototype.select=function(t){var e,i,n,r,s;for(s=[],i=0,n=(r=this.bindings).length;i<n;i++)t(e=r[i])&&s.push(e);return s},t.prototype.bind=function(){var t,e,i;for(t=0,e=(i=this.bindings).length;t<e;t++)i[t].bind()},t.prototype.unbind=function(){var t,e,i;for(t=0,e=(i=this.bindings).length;t<e;t++)i[t].unbind()},t.prototype.sync=function(){var t,e,i,n;for(e=0,i=(n=this.bindings).length;e<i;e++)"function"==typeof(t=n[e]).sync&&t.sync()},t.prototype.publish=function(){var t,e,i;for(t=0,e=(i=this.select(function(t){var e;return null!=(e=t.binder)?e.publishes:void 0})).length;t<e;t++)i[t].publish()},t.prototype.update=function(t){var e,i,n,r,s,o;for(i in null==t&&(t={}),t)n=t[i],this.models[i]=n;for(r=0,s=(o=this.bindings).length;r<s;r++)"function"==typeof(e=o[r]).update&&e.update(t)},t}(),k.Binding=function(){function t(t,e,i,n,r){this.view=t,this.el=e,this.type=i,this.keypath=n,this.options=null!=r?r:{},this.getValue=b(this.getValue,this),this.update=b(this.update,this),this.unbind=b(this.unbind,this),this.bind=b(this.bind,this),this.publish=b(this.publish,this),this.sync=b(this.sync,this),this.set=b(this.set,this),this.eventHandler=b(this.eventHandler,this),this.formattedValue=b(this.formattedValue,this),this.parseFormatterArguments=b(this.parseFormatterArguments,this),this.parseTarget=b(this.parseTarget,this),this.observe=b(this.observe,this),this.setBinder=b(this.setBinder,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={},this.model=void 0,this.setBinder()}return t.prototype.setBinder=function(){var t,e,i;if(!(this.binder=this.view.binders[this.type]))for(t in i=this.view.binders)e=i[t],"*"!==t&&-1!==t.indexOf("*")&&new RegExp("^"+t.replace(/\*/g,".+")+"$").test(this.type)&&(this.binder=e,this.args=new RegExp("^"+t.replace(/\*/g,"(.+)")+"$").exec(this.type),this.args.shift());if(this.binder||(this.binder=this.view.binders["*"]),this.binder instanceof Function)return this.binder={routine:this.binder}},t.prototype.observe=function(t,e,i){return k.sightglass(t,e,i,{root:this.view.rootInterface,adapters:this.view.adapters})},t.prototype.parseTarget=function(){var t;return(t=k.TypeParser.parse(this.keypath)).type===k.TypeParser.types.primitive?this.value=t.value:(this.observer=this.observe(this.view.models,this.keypath,this.sync),this.model=this.observer.target)},t.prototype.parseFormatterArguments=function(n,t){var e,r,i,s,o,u,a;for(s=[],e=u=0,a=(n=function(){var t,e,i;for(i=[],t=0,e=n.length;t<e;t++)r=n[t],i.push(k.TypeParser.parse(r));return i}()).length;u<a;e=++u)r=n[e],s.push(r.type===k.TypeParser.types.primitive?r.value:((o=this.formatterObservers)[t]||(o[t]={}),(i=this.formatterObservers[t][e])||(i=this.observe(this.view.models,r.value,this.sync),this.formatterObservers[t][e]=i),i.value()));return s},t.prototype.formattedValue=function(t){var e,i,n,r,s,o,u,a,l;for(i=o=0,u=(a=this.formatters).length;o<u;i=++o)r=(e=(n=a[i]).match(/[^\s']+|'([^']|'[^\s])*'|"([^"]|"[^\s])*"/g)).shift(),n=this.view.formatters[r],s=this.parseFormatterArguments(e,i),(null!=n?n.read:void 0)instanceof Function?t=(l=n.read).call.apply(l,[this.model,t].concat(c.call(s))):n instanceof Function&&(t=n.call.apply(n,[this.model,t].concat(c.call(s))));return t},t.prototype.eventHandler=function(e){var i,n;return n=(i=this).view.handler,function(t){return n.call(e,this,t,i)}},t.prototype.set=function(t){var e;return t=t instanceof Function&&!this.binder.function&&k.public.executeFunctions?this.formattedValue(t.call(this.model)):this.formattedValue(t),null!=(e=this.binder.routine)?e.call(this,this.el,t):void 0},t.prototype.sync=function(){var u,a;return this.set(function(){var t,e,i,n,r,s,o;if(this.observer){if(this.model!==this.observer.target){for(t=0,i=(r=this.dependencies).length;t<i;t++)(a=r[t]).unobserve();if(this.dependencies=[],null!=(this.model=this.observer.target)&&(null!=(s=this.options.dependencies)?s.length:void 0))for(e=0,n=(o=this.options.dependencies).length;e<n;e++)u=o[e],a=this.observe(this.model,u,this.sync),this.dependencies.push(a)}return this.observer.value()}return this.value}.call(this))},t.prototype.publish=function(){var t,e,i,n,r,s,o,u,a,l,h,p;if(this.observer){for(o=this.getValue(this.el),r=this.formatters.length-1,i=u=0,a=(l=this.formatters.slice(0).reverse()).length;u<a;i=++u)e=r-i,n=(t=l[i].split(/\s+/)).shift(),s=this.parseFormatterArguments(t,e),(null!=(h=this.view.formatters[n])?h.publish:void 0)&&(o=(p=this.view.formatters[n]).publish.apply(p,[o].concat(c.call(s))));return this.observer.setValue(o)}},t.prototype.bind=function(){var t,e,i,n,r,s,o;if(this.parseTarget(),null!=(r=this.binder.bind)&&r.call(this,this.el),null!=this.model&&(null!=(s=this.options.dependencies)?s.length:void 0))for(i=0,n=(o=this.options.dependencies).length;i<n;i++)t=o[i],e=this.observe(this.model,t,this.sync),this.dependencies.push(e);if(this.view.preloadData)return this.sync()},t.prototype.unbind=function(){var t,e,i,n,r,s,o,u,a;for(null!=(s=this.binder.unbind)&&s.call(this,this.el),null!=(o=this.observer)&&o.unobserve(),n=0,r=(u=this.dependencies).length;n<r;n++)u[n].unobserve();for(i in this.dependencies=[],a=this.formatterObservers)for(t in e=a[i])e[t].unobserve();return this.formatterObservers={}},t.prototype.update=function(t){var e,i;return null==t&&(t={}),this.model=null!=(e=this.observer)?e.target:void 0,null!=(i=this.binder.update)?i.call(this,t):void 0},t.prototype.getValue=function(t){return this.binder&&null!=this.binder.getValue?this.binder.getValue.call(this,t):k.Util.getInputValue(t)},t}(),k.ComponentBinding=function(t){function e(t,e,i){var n,r,s,o,u,a,l,h;for(this.view=t,this.el=e,this.type=i,this.unbind=b(this.unbind,this),this.bind=b(this.bind,this),this.locals=b(this.locals,this),this.component=this.view.components[this.type],this.static={},this.observers={},this.upstreamObservers={},r=t.bindingRegExp(),u=0,a=(l=this.el.attributes||[]).length;u<a;u++)n=l[u],r.test(n.name)||(s=this.camelCase(n.name),o=k.TypeParser.parse(n.value),0<=p.call(null!=(h=this.component.static)?h:[],s)?this.static[s]=n.value:o.type===k.TypeParser.types.primitive?this.static[s]=o.value:this.observers[s]=n.value)}return i(e,t),e.prototype.sync=function(){},e.prototype.update=function(){},e.prototype.publish=function(){},e.prototype.locals=function(){var t,e,i,n,r,s;for(t in i={},r=this.static)n=r[t],i[t]=n;for(t in s=this.observers)e=s[t],i[t]=e.value();return i},e.prototype.camelCase=function(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})},e.prototype.bind=function(){var t,e,i,n,r,s,o,u,a,l,h,p,c,d,f,v,b,g,y,m;if(!this.bound){for(e in d=this.observers)i=d[e],this.observers[e]=this.observe(this.view.models,i,function(e){return function(t){return function(){return e.componentView.models[t]=e.observers[t].value()}}}(this).call(this,e));this.bound=!0}if(null!=this.componentView)this.componentView.bind();else{for(this.el.innerHTML=this.component.template.call(this),o=this.component.initialize.call(this,this.el,this.locals()),this.el._bound=!0,s={},l=0,p=(f=k.extensions).length;l<p;l++){if(s[r=f[l]]={},this.component[r])for(t in v=this.component[r])u=v[t],s[r][t]=u;for(t in b=this.view[r])u=b[t],null==(a=s[r])[t]&&(a[t]=u)}for(h=0,c=(g=k.options).length;h<c;h++)s[r=g[h]]=null!=(y=this.component[r])?y:this.view[r];for(e in this.componentView=new k.View(Array.prototype.slice.call(this.el.childNodes),o,s),this.componentView.bind(),m=this.observers)n=m[e],this.upstreamObservers[e]=this.observe(this.componentView.models,e,function(i){return function(t,e){return function(){return e.setValue(i.componentView.models[t])}}}(this).call(this,e,n))}},e.prototype.unbind=function(){var t,e,i,n;for(t in e=this.upstreamObservers)e[t].unobserve();for(t in i=this.observers)i[t].unobserve();return null!=(n=this.componentView)?n.unbind.call(this):void 0},e}(k.Binding),k.TextBinding=function(t){function e(t,e,i,n,r){this.view=t,this.el=e,this.type=i,this.keypath=n,this.options=null!=r?r:{},this.sync=b(this.sync,this),this.formatters=this.options.formatters||[],this.dependencies=[],this.formatterObservers={}}return i(e,t),e.prototype.binder={routine:function(t,e){return t.data=null!=e?e:""}},e.prototype.sync=function(){return e.__super__.sync.apply(this,arguments)},e}(k.Binding),k.public.binders.text=function(t,e){return null!=t.textContent?t.textContent=null!=e?e:"":t.innerText=null!=e?e:""},k.public.binders.html=function(t,e){return t.innerHTML=null!=e?e:""},k.public.binders.show=function(t,e){return t.style.display=e?"":"none"},k.public.binders.hide=function(t,e){return t.style.display=e?"none":""},k.public.binders.enabled=function(t,e){return t.disabled=!e},k.public.binders.disabled=function(t,e){return t.disabled=!!e},k.public.binders.checked={publishes:!0,priority:2e3,bind:function(t){return k.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return k.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var i;return"radio"===t.type?t.checked=(null!=(i=t.value)?i.toString():void 0)===(null!=e?e.toString():void 0):t.checked=!!e}},k.public.binders.unchecked={publishes:!0,priority:2e3,bind:function(t){return k.Util.bindEvent(t,"change",this.publish)},unbind:function(t){return k.Util.unbindEvent(t,"change",this.publish)},routine:function(t,e){var i;return"radio"===t.type?t.checked=(null!=(i=t.value)?i.toString():void 0)!==(null!=e?e.toString():void 0):t.checked=!e}},k.public.binders.value={publishes:!0,priority:3e3,bind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return this.event="SELECT"===t.tagName?"change":"input",k.Util.bindEvent(t,this.event,this.publish)},unbind:function(t){if("INPUT"!==t.tagName||"radio"!==t.type)return k.Util.unbindEvent(t,this.event,this.publish)},routine:function(t,e){var i,n,r,s,o,u,a;if("INPUT"===t.tagName&&"radio"===t.type)return t.setAttribute("value",e);if(null!=window.jQuery){if(t=l(t),(null!=e?e.toString():void 0)!==(null!=(s=t.val())?s.toString():void 0))return t.val(null!=e?e:"")}else if("select-multiple"===t.type){if(null!=e){for(a=[],n=0,r=t.length;n<r;n++)i=t[n],a.push(i.selected=(o=i.value,0<=p.call(e,o)));return a}}else if((null!=e?e.toString():void 0)!==(null!=(u=t.value)?u.toString():void 0))return t.value=null!=e?e:""}},k.public.binders.if={block:!0,priority:4e3,bind:function(t){var e,i;if(null==this.marker)return e=[this.view.prefix,this.type].join("-").replace("--","-"),i=t.getAttribute(e),this.marker=document.createComment(" rivets: "+this.type+" "+i+" "),this.bound=!1,t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t)},unbind:function(){if(this.nested)return this.nested.unbind(),this.bound=!1},routine:function(t,e){var i,n,r,s;if(!!e==!this.bound){if(e){for(i in r={},s=this.view.models)n=s[i],r[i]=n;return(this.nested||(this.nested=new k.View(t,r,this.view.options()))).bind(),this.marker.parentNode.insertBefore(t,this.marker.nextSibling),this.bound=!0}return t.parentNode.removeChild(t),this.nested.unbind(),this.bound=!1}},update:function(t){var e;return null!=(e=this.nested)?e.update(t):void 0}},k.public.binders.unless={block:!0,priority:4e3,bind:function(t){return k.public.binders.if.bind.call(this,t)},unbind:function(){return k.public.binders.if.unbind.call(this)},routine:function(t,e){return k.public.binders.if.routine.call(this,t,!e)},update:function(t){return k.public.binders.if.update.call(this,t)}},k.public.binders["on-*"]={function:!0,priority:1e3,unbind:function(t){if(this.handler)return k.Util.unbindEvent(t,this.args[0],this.handler)},routine:function(t,e){return this.handler&&k.Util.unbindEvent(t,this.args[0],this.handler),k.Util.bindEvent(t,this.args[0],this.handler=this.eventHandler(e))}},k.public.binders["each-*"]={block:!0,priority:4e3,bind:function(t){var e,i,n,r;if(null==this.marker)e=[this.view.prefix,this.type].join("-").replace("--","-"),this.marker=document.createComment(" rivets: "+this.type+" "),this.iterated=[],t.removeAttribute(e),t.parentNode.insertBefore(this.marker,t),t.parentNode.removeChild(t);else for(i=0,n=(r=this.iterated).length;i<n;i++)r[i].bind()},unbind:function(t){var e,i,n;if(null!=this.iterated)for(e=0,i=(n=this.iterated).length;e<i;e++)n[e].unbind()},routine:function(t,e){var i,n,r,s,o,u,a,l,h,p,c,d,f,v,b,g,y,m,w;if(u=this.args[0],e=e||[],this.iterated.length>e.length)for(c=0,v=(y=Array(this.iterated.length-e.length)).length;c<v;c++)y[c],(p=this.iterated.pop()).unbind(),this.marker.parentNode.removeChild(p.els[0]);for(r=d=0,b=e.length;d<b;r=++d)if(o=e[r],(n={index:r})[k.public.iterationAlias(u)]=r,n[u]=o,null==this.iterated[r]){for(s in m=this.view.models)o=m[s],null==n[s]&&(n[s]=o);l=this.iterated.length?this.iterated[this.iterated.length-1].els[0]:this.marker,(a=this.view.options()).preloadData=!0,h=t.cloneNode(!0),(p=new k.View(h,n,a)).bind(),this.iterated.push(p),this.marker.parentNode.insertBefore(h,l.nextSibling)}else this.iterated[r].models[u]!==o&&this.iterated[r].update(n);if("OPTION"===t.nodeName)for(f=0,g=(w=this.view.bindings).length;f<g;f++)(i=w[f]).el===this.marker.parentNode&&"value"===i.type&&i.sync()},update:function(t){var e,i,n,r,s,o;for(i in e={},t)n=t[i],i!==this.args[0]&&(e[i]=n);for(r=0,s=(o=this.iterated).length;r<s;r++)o[r].update(e)}},k.public.binders["class-*"]=function(t,e){var i;if(!e==(-1!==(i=" "+t.className+" ").indexOf(" "+this.args[0]+" ")))return t.className=e?t.className+" "+this.args[0]:i.replace(" "+this.args[0]+" "," ").trim()},k.public.binders["*"]=function(t,e){return null!=e?t.setAttribute(this.type,e):t.removeAttribute(this.type)},k.public.formatters.call=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],e.call.apply(e,[this].concat(c.call(t)))},k.public.adapters["."]={id:"_rv",counter:0,weakmap:{},weakReference:function(t){var e,i,n;return t.hasOwnProperty(this.id)||(e=this.counter++,Object.defineProperty(t,this.id,{value:e})),(i=this.weakmap)[n=t[this.id]]||(i[n]={callbacks:{}})},cleanupWeakReference:function(t,e){if(!(Object.keys(t.callbacks).length||t.pointers&&Object.keys(t.pointers).length))return delete this.weakmap[e]},stubFunction:function(l,t){var h,p,c;return p=l[t],h=this.weakReference(l),c=this.weakmap,l[t]=function(){var t,e,i,n,r,s,o,u,a;for(e in i=p.apply(l,arguments),s=h.pointers)for(t=s[e],n=0,r=(a=null!=(o=null!=(u=c[e])?u.callbacks[t]:void 0)?o:[]).length;n<r;n++)(0,a[n])();return i}},observeMutations:function(t,e,i){var n,r,s,o,u,a;if(Array.isArray(t)){if(null==(s=this.weakReference(t)).pointers)for(s.pointers={},u=0,a=(r=["push","pop","shift","unshift","sort","reverse","splice"]).length;u<a;u++)n=r[u],this.stubFunction(t,n);if(null==(o=s.pointers)[e]&&(o[e]=[]),p.call(s.pointers[e],i)<0)return s.pointers[e].push(i)}},unobserveMutations:function(t,e,i){var n,r,s;if(Array.isArray(t)&&null!=t[this.id]&&(r=this.weakmap[t[this.id]])&&(s=r.pointers[e]))return 0<=(n=s.indexOf(i))&&s.splice(n,1),s.length||delete r.pointers[e],this.cleanupWeakReference(r,t[this.id])},observe:function(o,u,t){var a,e,l,h;return null==(a=this.weakReference(o).callbacks)[u]&&(a[u]=[],(null!=(e=Object.getOwnPropertyDescriptor(o,u))?e.get:void 0)||(null!=e?e.set:void 0)||(l=o[u],Object.defineProperty(o,u,{enumerable:!0,get:function(){return l},set:(h=this,function(t){var e,i,n,r,s;if(t!==l&&(h.unobserveMutations(l,o[h.id],u),l=t,i=h.weakmap[o[h.id]])){if((a=i.callbacks)[u])for(n=0,r=(s=a[u].slice()).length;n<r;n++)e=s[n],0<=p.call(a[u],e)&&e();return h.observeMutations(t,o[h.id],u)}})}))),p.call(a[u],t)<0&&a[u].push(t),this.observeMutations(o[u],o[this.id],u)},unobserve:function(t,e,i){var n,r,s;if((s=this.weakmap[t[this.id]])&&(n=s.callbacks[e]))return 0<=(r=n.indexOf(i))&&(n.splice(r,1),n.length||(delete s.callbacks[e],this.unobserveMutations(t[e],t[this.id],e))),this.cleanupWeakReference(s,t[this.id])},get:function(t,e){return t[e]},set:function(t,e,i){return t[e]=i}},k.factory=function(t){return k.sightglass=t,(k.public._=k).public},"object"==typeof(null!=o?o.exports:void 0)?o.exports=k.factory(e("sightglass")):"function"==typeof define&&define.amd?define(["sightglass"],function(t){return this.rivets=k.factory(t)}):this.rivets=k.factory(sightglass)}).call(this)},{sightglass:2}],2:[function(t,e,i){(function(){function n(t,e,i,n){return new r(t,e,i,n)}function r(t,e,i,n){this.options=n||{},this.options.adapters=this.options.adapters||{},this.obj=t,this.keypath=e,this.callback=i,this.objectPath=[],this.update=this.update.bind(this),this.parse(),s(this.target=this.realize())&&this.set(!0,this.key,this.target,this.callback)}function s(t){return"object"==typeof t&&null!==t}function o(t){throw new Error("[sightglass] "+t)}n.adapters={},r.tokenize=function(t,e,i){var n,r,s=[],o={i:i,path:""};for(n=0;n<t.length;n++)r=t.charAt(n),~e.indexOf(r)?(s.push(o),o={i:r,path:""}):o.path+=r;return s.push(o),s},r.prototype.parse=function(){var t,e,i=this.interfaces();i.length||o("Must define at least one adapter interface."),~i.indexOf(this.keypath[0])?(t=this.keypath[0],e=this.keypath.substr(1)):(void 0===(t=this.options.root||n.root)&&o("Must define a default root adapter."),e=this.keypath),this.tokens=r.tokenize(e,i,t),this.key=this.tokens.pop()},r.prototype.realize=function(){var i,n=this.obj,r=!1;return this.tokens.forEach(function(t,e){s(n)?(void 0!==this.objectPath[e]?n!==(i=this.objectPath[e])&&(this.set(!1,t,i,this.update),this.set(!0,t,n,this.update),this.objectPath[e]=n):(this.set(!0,t,n,this.update),this.objectPath[e]=n),n=this.get(t,n)):(!1===r&&(r=e),(i=this.objectPath[e])&&this.set(!1,t,i,this.update))},this),!1!==r&&this.objectPath.splice(r),n},r.prototype.update=function(){var t,e;(t=this.realize())!==this.target&&(s(this.target)&&this.set(!1,this.key,this.target,this.callback),s(t)&&this.set(!0,this.key,t,this.callback),e=this.value(),this.target=t,(this.value()instanceof Function||this.value()!==e)&&this.callback())},r.prototype.value=function(){if(s(this.target))return this.get(this.key,this.target)},r.prototype.setValue=function(t){s(this.target)&&this.adapter(this.key).set(this.target,this.key.path,t)},r.prototype.get=function(t,e){return this.adapter(t).get(e,t.path)},r.prototype.set=function(t,e,i,n){var r=t?"observe":"unobserve";this.adapter(e)[r](i,e.path,n)},r.prototype.interfaces=function(){var e=Object.keys(this.options.adapters);return Object.keys(n.adapters).forEach(function(t){~e.indexOf(t)||e.push(t)}),e},r.prototype.adapter=function(t){return this.options.adapters[t.i]||n.adapters[t.i]},r.prototype.unobserve=function(){var i;this.tokens.forEach(function(t,e){(i=this.objectPath[e])&&this.set(!1,t,i,this.update)},this),s(this.target)&&this.set(!1,this.key,this.target,this.callback)},void 0!==e&&e.exports?e.exports=n:"function"==typeof define&&define.amd?define([],function(){return this.sightglass=n}):this.sightglass=n}).call(this)},{}],3:[function(t,e,i){"use strict";var n;i.__esModule=!0,(n=i.Config||(i.Config={})).appId="983359304",n.appStoreUrl="https://itunes.apple.com/{locale}/rss/customerreviews/page={page}/id={id}/sortby=mostrecent/json"},{}],4:[function(t,e,i){"use strict";i.__esModule=!0;var n=function(e,i){e.filters[i].value.includes(e.review[i])?e.filters[i].value=e.filters[i].value.filter(function(t){return t!==e.review[i]}):e.filters[i].value.push(e.review[i])},r=function(){function t(){}return t.prototype.filterLocale=function(t,e){n(e,"locale")},t.prototype.filterRating=function(t,e){n(e,"rating")},t.prototype.filterVersion=function(t,e){n(e,"version")},t.prototype.clearVersionFilter=function(t,e){e.filters.version.value=[]},t.prototype.clearRatingFilter=function(t,e){e.filters.rating.value=[]},t.prototype.clearLocaleFilter=function(t,e){e.filters.locale.value=[]},t.prototype.clearFilters=function(t,e){e.filters.version.value=[],e.filters.rating.value=[],e.filters.locale.value=[]},t}();i.default=r},{}],5:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("rivets"),o=t("./model/Country"),u=t("./model/DataModel"),r=t("./service/Api"),s=t("./service/RivetsFormatters"),a=new r.default,l=new s.default;function h(r,s){a.getReviews(r,s).then(function(t){var e=t.appInfo,i=t.reviews,n=t.nextPage;u.dataModel.reviews=u.dataModel.reviews.concat(i),o.country.us===o.country[r]&&(u.dataModel.appInfo=e),n&&s<n&&h(r,n)})}for(var p in l.init(),n.bind(document.querySelector("#container"),u.dataModel),o.country)if(o.country.hasOwnProperty(p)){h(p,1)}},{"./model/Country":6,"./model/DataModel":7,"./service/Api":8,"./service/RivetsFormatters":9,rivets:1}],6:[function(t,e,i){"use strict";i.__esModule=!0,i.country={us:"USA",ru:"Russia",es:"Spain",de:"Germany",fr:"France",gb:"UK",nl:"Netherlands",kr:"South Korea",br:"Brasil",by:"Belarus",gr:"Greece",it:"Italy",jp:"Japan",cn:"China"}},{}],7:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../controller/FilterController");i.dataModel={appInfo:null,reviews:[],review:null,filters:{locale:{key:"locale",value:["us"]},version:{key:"version",value:[]},rating:{key:"rating",value:[]}},controller:new n.default}},{"../controller/FilterController":4}],8:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("../config"),r=t("../model/Country"),s=function(){function t(){this.itunesUrl=n.Config.appStoreUrl,this.imageSize=1<window.devicePixelRatio?2:0,this.defaultAppId=n.Config.appId}return t.prototype.getReviews=function(o,t){var u=this;return new Promise(function(r,s){u.getJson2("GET",u.generateUrl(o,t)).then(function(t){var e=null,i=null,n=null;t.feed&&t.feed.entry&&t.feed.link?(e=u.decodeAppInfo(t.feed.entry.shift()),i=t.feed.entry.map(u.decodeReview.bind(u,o)),n=u.decodeNextPage(t.feed.link),r({appInfo:e,reviews:i,nextPage:n})):s("JSON parse error")}).catch(function(t){return s(t)})})},t.prototype.getJson2=function(t,r){return new Promise(function(e,i){var n=new XMLHttpRequest;n.open(t,r,!0),n.onload=function(){if(200<=n.status&&n.status<400){var t=JSON.parse(n.responseText);e(t)}else i("Server returned an error")},n.onerror=function(){return i("Connection error")},n.send()})},t.prototype.setRating=function(t){for(var e="",i=+t;i--;)e+="★";for(;e.length<5;)e+="☆";return e},t.prototype.decodeAppInfo=function(t){return{name:t["im:name"].label,author:t["im:artist"].label,authorUrl:t["im:artist"].attributes.href,image:t["im:image"][this.imageSize].label,price:"Get"===t["im:price"].label?"Free":t["im:price"].label,appUrl:t.id.label}},t.prototype.decodeReview=function(t,e){return e.author?{id:e.id.label,title:e.title.label,author:e.author.name.label,content:e.content.label,rating:Number(e["im:rating"].label),starRating:this.setRating(e["im:rating"].label),version:e["im:version"].label,locale:t,store:r.country[t]}:null},t.prototype.decodeNextPage=function(t){for(var e=0,i=t;e<i.length;e++){var n=i[e];if("next"===n.attributes.rel)return+(""+n.attributes.href.match(/page=\d+/)).replace(/\D/g,"")||null}return null},t.prototype.generateUrl=function(t,e){var i=window.location.hash?window.location.hash.substring(1):this.defaultAppId,n=e?e.toString():"1";return this.itunesUrl.replace("{locale}",t||"en").replace("{page}",n).replace("{id}",i)},t}();i.default=s},{"../config":3,"../model/Country":6}],9:[function(t,e,i){"use strict";i.__esModule=!0;var n=t("rivets"),r=function(){function t(){}return t.prototype.init=function(){n.formatters.length=function(t){return t.length||0},n.formatters.empty=function(t){return 0===t.length},n.formatters.first=function(t){return t.shift()},n.formatters.last=function(t){return t.pop()},n.formatters.sort=function(t){return t.sort()},n.formatters.and=function(t,e){return t&&e},n.formatters.not=function(t){return!t},n.formatters.sortBy=function(t,r){return t.sort(function(t,e){var i=t[r],n=e[r];return i<n?-1:n<i?1:0})},n.formatters.filter=function(t,e,i){return null===i||0===i.length?t:i instanceof Array?t.filter(function(t){return i.includes(t[e])}):t.filter(function(t){return t[e]===i})},n.formatters.unique=function(t,e){var i=[];return t.filter(function(t){return!i.includes(t[e])&&(i.push(t[e]),!0)})},n.formatters.average=function(i,n){return i.reduce(function(t,e){return t+e[n]/i.length},0).toFixed(2)},n.formatters.contains=function(t,e){return 0<t.length&&t.includes(e)}},t}();i.default=r},{rivets:1}]},{},[5]);